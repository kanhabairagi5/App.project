<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Ultimate Interview Solution</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE VARIABLES --- */
        :root { 
            --primary: #4f46e5; 
            --primary-light: #eef2ff;
            --bg: #f3f4f6; 
            --text: #1f2937; 
            --success: #10b981; 
            --danger: #ef4444;
            --border: #e5e7eb; 
            --white: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; overflow: hidden; }

        /* --- SIDEBAR --- */
        .sidebar { width: 260px; background: var(--white); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 20px; z-index: 10; }
        .logo { font-size: 1.4rem; font-weight: 800; color: var(--primary); margin-bottom: 30px; display: flex; align-items: center; gap: 8px; }
        .nav-btn { padding: 12px 15px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; color: #6b7280; font-weight: 500; transition: 0.2s; display: flex; align-items: center; gap: 10px; }
        .nav-btn:hover { background: #f9fafb; color: var(--primary); }
        .nav-btn.active { background: var(--primary-light); color: var(--primary); font-weight: 600; }

        /* --- MAIN AREA --- */
        .main-content { flex: 1; position: relative; display: flex; flex-direction: column; overflow: hidden; }
        
        /* Views */
        .view-section { display: none; height: 100%; width: 100%; overflow-y: auto; padding: 30px; }
        .view-section.active { display: block; }

        /* --- DASHBOARD STYLES --- */
        .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--white); padding: 20px; border-radius: 12px; border: 1px solid var(--border); }
        
        .tab-container { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; border-bottom: 1px solid var(--border); }
        .tab-btn { padding: 8px 20px; background: white; border: 1px solid var(--border); border-radius: 20px; cursor: pointer; white-space: nowrap; font-weight: 500; color: #6b7280; transition: 0.2s; }
        .tab-btn:hover { background: #f9fafb; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        .q-card { background: var(--white); padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 1px solid var(--border); cursor: pointer; transition: 0.2s; }
        .q-card:hover { transform: translateY(-2px); border-color: #a5b4fc; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .q-card-q { font-size: 1.05rem; font-weight: 600; color: var(--text); display: flex; justify-content: space-between; align-items: center; }
        .q-card-q::after { content: '+'; font-size: 1.2rem; color: #9ca3af; }
        .q-card.open .q-card-q::after { content: '-'; }
        .answer-text { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border); color: #4b5563; line-height: 1.6; }
        .q-card.open .answer-text { display: block; animation: fadeIn 0.3s ease; }

        /* --- MOCK TEST SELECTION --- */
        .mock-card { background: var(--white); padding: 25px; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; transition: 0.2s; text-align: center; }
        .mock-card:hover { border-color: var(--primary); transform: translateY(-3px); }
        .topic-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }

        /* --- EXAM INTERFACE --- */
        .exam-layout { display: flex; height: 100%; gap: 20px; }
        .exam-main { flex: 1; background: var(--white); border-radius: 16px; padding: 40px; border: 1px solid var(--border); display: flex; flex-direction: column; overflow-y: auto; }
        .exam-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        .timer-badge { background: #fee2e2; color: #dc2626; padding: 6px 14px; border-radius: 20px; font-weight: 700; font-size: 0.9rem; }
        
        .options-grid { display: grid; gap: 12px; margin-top: 20px; }
        .option-card { padding: 15px 20px; border: 2px solid var(--border); border-radius: 10px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 15px; }
        .option-card:hover { background: #fdfcff; border-color: #a5b4fc; }
        .option-card.selected { border-color: var(--primary); background: var(--primary-light); color: var(--primary); font-weight: 600; }
        .option-circle { width: 20px; height: 20px; border-radius: 50%; border: 2px solid #cbd5e1; display: flex; align-items: center; justify-content: center; }
        .option-card.selected .option-circle { border-color: var(--primary); border-width: 6px; }
        
        /* Correct/Wrong Visuals for Review */
        .option-card.correct { border-color: var(--success); background: #f0fdf4; color: var(--success); }
        .option-card.wrong { border-color: var(--danger); background: #fef2f2; color: var(--danger); }

        /* Palette */
        .exam-sidebar { width: 280px; background: var(--white); border-radius: 16px; border: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; }
        .palette-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
        .q-num { height: 40px; width: 40px; border-radius: 8px; background: #f3f4f6; display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; color: #6b7280; font-size: 0.9rem; }
        .q-num.active { border: 2px solid var(--primary); }
        .q-num.answered { background: var(--primary); color: white; }

        /* Buttons */
        .btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; font-size: 0.95rem; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--border); color: #4b5563; }
        
        /* Result */
        .result-box { text-align: center; background: white; padding: 40px; border-radius: 16px; margin: 20px auto; max-width: 500px; border: 1px solid var(--border); }
        .score-circle { font-size: 3rem; font-weight: 800; color: var(--primary); margin: 20px 0; }
        
        /* History Table */
        .history-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; margin-top: 20px; }
        .history-table th, .history-table td { padding: 15px; text-align: left; border-bottom: 1px solid var(--border); }
        .history-table th { background: #f9fafb; font-weight: 600; color: #6b7280; }
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }
        .badge-good { background: #dcfce7; color: #166534; }
        .badge-avg { background: #fef9c3; color: #854d0e; }
        .badge-bad { background: #fee2e2; color: #991b1b; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="logo">üéØ PathFinder<span style="font-size:0.8rem; background:black; color:white; padding:2px 6px; border-radius:4px; margin-left:5px;">PRO</span></div>

        <div onclick="window.history.back()" class="nav-btn" style="background: #fee2e2; color: #b91c1c; font-weight: bold; cursor: pointer; margin-bottom: 20px;">
    ‚¨ÖÔ∏è Back to Home
</div>
</a>

        <div class="nav-btn active" onclick="showView('dashboard', this)">üìö Study Material</div>
        <div class="nav-btn" onclick="showView('mock-select', this)">üìù Mock Tests</div>
        <div class="nav-btn" onclick="showView('result-history', this)">üèÜ My Results</div>
    </aside>

    <main class="main-content">

        <div id="view-dashboard" class="view-section active">
            <h2 style="margin-bottom: 20px;">Study Dashboard</h2>
            
            <div class="stat-grid">
                <div class="stat-card">
                    <span style="color:#6b7280; font-size:0.9rem;">Total Questions</span>
                    <h2 style="font-size: 1.8rem;">250+</h2>
                </div>
                <div class="stat-card">
                    <span style="color:#6b7280; font-size:0.9rem;">Tests Completed</span>
                    <h2 style="font-size: 1.8rem;" id="totalTestsDisp">0</h2>
                </div>
            </div>

            <div class="tab-container">
                <button class="tab-btn active" onclick="renderStudyList('hr', this)">ü§ù HR</button>
                <button class="tab-btn" onclick="renderStudyList('react', this)">‚öõÔ∏è React</button>
                <button class="tab-btn" onclick="renderStudyList('node', this)">üü¢ Node</button>
                <button class="tab-btn" onclick="renderStudyList('sql', this)">üóÑÔ∏è SQL</button>
                <button class="tab-btn" onclick="renderStudyList('pharma', this)">üíä Pharma</button>
            </div>

            <div id="studyListContainer"></div>
        </div>

        <div id="view-mock-select" class="view-section">
            <h2 style="margin-bottom: 10px;">Select Mock Test</h2>
            <p style="color:#6b7280; margin-bottom: 30px;">Real-time exam simulation. 10 Random Questions per test.</p>
            
            <div class="stat-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                <div class="mock-card" onclick="startExam('hr')">
                    <span class="topic-icon">ü§ù</span>
                    <h3>HR Interview</h3>
                    <p style="color:#6b7280; font-size:0.9rem;">10 Questions ‚Ä¢ 10 Mins</p>
                </div>
                <div class="mock-card" onclick="startExam('react')">
                    <span class="topic-icon">‚öõÔ∏è</span>
                    <h3>React JS</h3>
                    <p style="color:#6b7280; font-size:0.9rem;">10 Questions ‚Ä¢ 10 Mins</p>
                </div>
                <div class="mock-card" onclick="startExam('node')">
                    <span class="topic-icon">üü¢</span>
                    <h3>Node JS</h3>
                    <p style="color:#6b7280; font-size:0.9rem;">10 Questions ‚Ä¢ 10 Mins</p>
                </div>
                <div class="mock-card" onclick="startExam('sql')">
                    <span class="topic-icon">üóÑÔ∏è</span>
                    <h3>SQL Database</h3>
                    <p style="color:#6b7280; font-size:0.9rem;">10 Questions ‚Ä¢ 10 Mins</p>
                </div>
                <div class="mock-card" onclick="startExam('pharma')">
                    <span class="topic-icon">üíä</span>
                    <h3>Pharma</h3>
                    <p style="color:#6b7280; font-size:0.9rem;">10 Questions ‚Ä¢ 10 Mins</p>
                </div>
            </div>
        </div>

        <div id="view-exam" class="view-section" style="padding: 20px; background: #f8fafc;">
            <div class="exam-layout">
                <div class="exam-main">
                    <div class="exam-header">
                        <div>
                            <span style="font-size:0.9rem; color:#6b7280; font-weight:600;">Question <span id="currentQNum">1</span> of <span id="totalQNum">10</span></span>
                            <h3 id="subjectTitle" style="color:var(--primary); margin-top:5px;">TEST</h3>
                        </div>
                        <div class="timer-badge">‚è±Ô∏è <span id="timerDisplay">10:00</span></div>
                    </div>

                    <div id="questionContainer">
                        <div style="font-size:1.2rem; font-weight:600; margin-bottom:20px;" id="qText">Loading...</div>
                        <div class="options-grid" id="optionsBox"></div>
                    </div>

                    <div style="margin-top:auto; padding-top:30px; display:flex; justify-content:space-between;">
                        <button class="btn btn-outline" onclick="prevQuestion()" id="btnPrev">Previous</button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="btnNext">Next</button>
                        <button class="btn btn-primary" style="background:#10b981; display:none;" onclick="submitExam()" id="btnSubmit">Submit Test</button>
                        <button class="btn btn-outline" style="display:none;" onclick="showView('result-history')" id="btnFinishReview">Finish Review</button>
                    </div>
                </div>

                <div class="exam-sidebar">
                    <h4>Question Palette</h4>
                    <div class="palette-grid" id="paletteBox"></div>
                </div>
            </div>
        </div>

        <div id="view-result" class="view-section">
            <div class="result-box">
                <h2>Test Completed!</h2>
                <div class="score-circle"><span id="scoreValue">0</span>%</div>
                <p>Correct: <span id="resCorrect" style="color:var(--success); font-weight:bold;">0</span> | Wrong: <span id="resWrong" style="color:#dc2626; font-weight:bold;">0</span></p>
                <div style="display:flex; gap:10px; justify-content:center; margin-top:30px;">
                    <button class="btn btn-outline" onclick="startReviewMode()">üëÄ See Answers</button>
                    <button class="btn btn-primary" onclick="showView('mock-select')">Take Another Test</button>
                </div>
            </div>
        </div>

         <div id="view-result-history" class="view-section">
             <h2>My Results History</h2>
             <p style="color:#6b7280; margin-bottom:20px;">Your past performance is saved here.</p>
             
             <div id="historyList">
                 <p style="color:#9ca3af; text-align:center; margin-top:50px;">No tests taken yet.</p>
             </div>
             
             <div style="margin-top:20px; text-align:right;">
                 <button onclick="clearHistory()" style="color:#ef4444; background:none; border:none; cursor:pointer; font-size:0.9rem;">üóëÔ∏è Clear History</button>
             </div>
         </div>

    </main>

<script>
    /* =========================================
       1. DATA: STUDY MATERIAL (Full 50+ Questions)
       ========================================= */
    const studyDB = {
        hr: [
            {q: "Tell me about yourself.", a: "I am a disciplined and quick-learning person with strong communication skills."},
            {q: "What are your strengths?", a: "I am good at problem-solving, I learn fast, and I maintain consistency."},
            {q: "What are your weaknesses?", a: "I used to overthink tasks, but now I break them into steps."},
            {q: "Why do you want to join our company?", a: "Your company values growth and innovation."},
            {q: "Where do you see yourself in 5 years?", a: "I see myself in a stable and responsible position."},
            {q: "Why should we hire you?", a: "Because I bring dedication, discipline, and a strong willingness to learn."},
            {q: "Describe a proud moment.", a: "When I completed a challenging task under pressure."},
            {q: "What motivates you?", a: "Progress and learning new skills motivate me."},
            {q: "What demotivates you?", a: "Lack of clarity in tasks can demotivate me."},
            {q: "Biggest achievement?", a: "Successfully completing a project independently."},
            {q: "Teamwork example?", a: "I coordinated tasks and supported team members to meet a deadline."},
            {q: "Handling conflict?", a: "I stay calm and focus on the solution."},
            {q: "Helped a team member?", a: "Explained a concept to a struggling teammate."},
            {q: "Leader is wrong?", a: "I share my thoughts respectfully with logic."},
            {q: "Difficult colleagues?", a: "Keep communication professional and focus on work."},
            {q: "Failure example?", a: "Underestimated a deadline once; learned time management."},
            {q: "High pressure?", a: "Broke tasks into steps and prioritized."},
            {q: "Tight deadline?", a: "Organized workflow and eliminated distractions."},
            {q: "Challenging project?", a: "Worked extra hours to learn new concepts."},
            {q: "Prioritizing tasks?", a: "By urgency and importance."},
            {q: "Explain tech to non-tech?", a: "Use simple examples and avoid jargon."},
            {q: "Fixed miscommunication?", a: "Clarified expectations and documented the plan."},
            {q: "Handling criticism?", a: "Take it positively to improve."},
            {q: "Giving feedback?", a: "Focus on work, not the person."},
            {q: "Led a team?", a: "Yes, assigned tasks based on strengths."},
            {q: "Leadership style?", a: "Supportive and organized."},
            {q: "Took initiative?", a: "Noticed a delay and planned steps to fix it."},
            {q: "Motivate others?", a: "Appreciate work and listen to issues."},
            {q: "Time management?", a: "Plan day, set priorities, avoid multitasking."},
            {q: "Why left last job?", a: "For better learning opportunities."},
            {q: "Know about company?", a: "Focus on innovation and quality."},
            {q: "Salary expectation?", a: "Open to standard range, focus on growth."},
            {q: "Relocate?", a: "Yes, flexible."},
            {q: "Overtime?", a: "Yes, when needed."},
            {q: "Solved big problem?", a: "Identified root cause and implemented simple solution."},
            {q: "Manager disagreement?", a: "Express view respectfully, support final decision."},
            {q: "Unknown task?", a: "Research, ask questions, learn quickly."},
            {q: "Learned quickly?", a: "Used online resources to learn new tool in days."},
            {q: "Improved process?", a: "Suggested simpler method, increased speed."},
            {q: "Coworker underperforming?", a: "Offer help and encourage."},
            {q: "Ethical dilemma?", a: "Chose honesty over easy way out."},
            {q: "Honesty meaning?", a: "Truthful and responsible actions."},
            {q: "Mistake responsibility?", a: "Accepted, fixed, ensured no repeat."},
            {q: "Confidential info?", a: "Maintain strict privacy."},
            {q: "Ideal environment?", a: "Supportive, learning-friendly."},
            {q: "Alone or team?", a: "Both, flexible."},
            {q: "Stay organized?", a: "To-do lists and planning."},
            {q: "Adapt to change?", a: "Stay flexible and adjust approach."},
            {q: "Daily workflow?", a: "Check priorities, focus on tasks."},
            {q: "Questions for us?", a: "About growth and training programs."}
        ],
        react: [
            {q: "What is React?", a: "A JS library for building UIs."},
            {q: "What are components?", a: "Reusable UI blocks."},
            {q: "Functional vs Class?", a: "Functional use hooks; Class use lifecycle methods."},
            {q: "What are props?", a: "Read-only inputs from parent."},
            {q: "What is state?", a: "Internal data that triggers re-render."},
            {q: "What is useState?", a: "Hook to manage state."},
            {q: "What is useEffect?", a: "Hook for side effects."},
            {q: "What is useRef?", a: "Access DOM or store mutable values."},
            {q: "useMemo vs useCallback?", a: "Memo caches value; Callback caches function."},
            {q: "What is useContext?", a: "Global state without prop drilling."},
            {q: "Virtual DOM?", a: "Lightweight copy for fast updates."},
            {q: "Causes re-render?", a: "State/Props change."},
            {q: "What are keys?", a: "Unique IDs for lists."},
            {q: "Reconciliation?", a: "Diffing algorithm process."},
            {q: "React Fiber?", a: "New rendering engine."},
            {q: "Redux?", a: "State management library."},
            {q: "Redux vs Context?", a: "Redux for complex, Context for simple."},
            {q: "Reducer?", a: "Function handling state transitions."},
            {q: "Suspense?", a: "Handle lazy loading."},
            {q: "Lazy loading?", a: "Load on demand."},
            {q: "memo()?", a: "Prevents re-renders."},
            {q: "Controlled components?", a: "Form data handled by React state."},
            {q: "React Router?", a: "Navigation library."},
            {q: "Browser vs Hash Router?", a: "Clean URL vs Hash URL."},
            {q: "Protect routes?", a: "Auth check before render."},
            {q: "API calls?", a: "In useEffect."},
            {q: "Axios vs Fetch?", a: "Axios has better defaults."},
            {q: "Custom hooks?", a: "Reusable logic functions."},
            {q: "Error boundary?", a: "Catch UI errors."},
            {q: "JSX?", a: "HTML in JS."},
            {q: "Hydration?", a: "Attaching React to HTML."},
            {q: "SSR?", a: "Server Side Rendering."},
            {q: "React vs Next.js?", a: "Library vs Framework."},
            {q: "Lifecycle methods?", a: "Mount, Update, Unmount."},
            {q: "Optimize performance?", a: "Memo, Lazy, Keys."},
            {q: "Event bubbling?", a: "Child to Parent event flow."},
            {q: "Synthetic event?", a: "Cross-browser wrapper."},
            {q: "Prop drilling?", a: "Passing props deeply."},
            {q: "Fragment?", a: "Wrapper without DOM node."},
            {q: "Render props?", a: "Sharing logic via prop function."},
            {q: "Diffing algo?", a: "Compare logic."},
            {q: "Portal?", a: "Render outside parent DOM."},
            {q: "SPA vs MPA?", a: "Single vs Multi page."},
            {q: "State lifting?", a: "Moving state up."},
            {q: "Debounce?", a: "Delay execution."},
            {q: "Throttle?", a: "Limit execution rate."},
            {q: "Debug React?", a: "DevTools."},
            {q: "HOC?", a: "Higher Order Component."},
            {q: "Hydration mismatch?", a: "Server/Client HTML diff."},
            {q: "Best practice?", a: "Clean structure, reusable code."}
        ],
        node: [
            {q: "What is Node.js?", a: "JS runtime on V8."},
            {q: "Single threaded?", a: "Event loop architecture."},
            {q: "Event loop?", a: "Handles async ops."},
            {q: "Non-blocking I/O?", a: "Doesn't wait for completion."},
            {q: "NPM?", a: "Package manager."},
            {q: "Package.json?", a: "Metadata file."},
            {q: "Modules?", a: "Reusable code."},
            {q: "CommonJS vs ES?", a: "Require vs Import."},
            {q: "Middleware?", a: "Request processing functions."},
            {q: "Express?", a: "Web framework."},
            {q: "Routes?", a: "Endpoints."},
            {q: "Body-parser?", a: "Parse request body."},
            {q: "REST API?", a: "Standard for web APIs."},
            {q: "CRUD?", a: "Create Read Update Delete."},
            {q: "Async/Await?", a: "Clean async syntax."},
            {q: "Callback hell?", a: "Nested callbacks."},
            {q: "Streams?", a: "Data flow objects."},
            {q: "Buffer?", a: "Temp binary data."},
            {q: "Error-first callback?", a: "Err is first arg."},
            {q: "Process object?", a: "Global environment info."},
            {q: "Chaining?", a: "Middleware sequence."},
            {q: "Event Emitter?", a: "Custom event handling."},
            {q: "Cluster?", a: "Multi-core usage."},
            {q: "Why Node?", a: "Fast, scalable."},
            {q: "CORS?", a: "Cross-Origin Sharing."},
            {q: "Error handling?", a: "Try-catch, handlers."},
            {q: "JWT?", a: "Token auth."},
            {q: "Bcrypt?", a: "Password hashing."},
            {q: "Dotenv?", a: "Env variables."},
            {q: "PM2?", a: "Process manager."},
            {q: "Rate limiting?", a: "Limit requests."},
            {q: "Helmet?", a: "Security headers."},
            {q: "Morgan?", a: "Logger."},
            {q: "Nodemon?", a: "Auto restarter."},
            {q: "Socket.io?", a: "Real-time bi-directional."},
            {q: "Middleware order?", a: "Sequential."},
            {q: "DB Connection?", a: "Mongoose/Sequelize."},
            {q: "ORM?", a: "Object Relational Mapping."},
            {q: "MVC?", a: "Model View Controller."},
            {q: "Scalability?", a: "Handle growth."},
            {q: "Validation?", a: "Joi/Yup."},
            {q: "Versioning?", a: "API v1/v2."},
            {q: "HTTPS?", a: "Secure HTTP."},
            {q: "Cookie-parser?", a: "Parse cookies."},
            {q: "HTTP methods?", a: "GET POST PUT DELETE."},
            {q: "404?", a: "Not Found."},
            {q: "500?", a: "Server Error."},
            {q: "Performance?", a: "Caching, Clustering."},
            {q: "Memory leak?", a: "Unreleased memory."},
            {q: "REPL?", a: "Read Eval Print Loop."}
        ],
        sql: [
            {q: "What is SQL?", a: "Structured Query Language."},
            {q: "DBMS?", a: "Database Management System."},
            {q: "RDBMS?", a: "Relational DBMS."},
            {q: "Table?", a: "Rows and columns."},
            {q: "Primary Key?", a: "Unique identifier."},
            {q: "Foreign Key?", a: "Link between tables."},
            {q: "Candidate Key?", a: "Potential PK."},
            {q: "Composite Key?", a: "Multiple column PK."},
            {q: "Unique Key?", a: "No duplicates."},
            {q: "Not Null?", a: "Cannot be empty."},
            {q: "View?", a: "Virtual table."},
            {q: "Index?", a: "Faster search."},
            {q: "Clustered Index?", a: "Physical sort."},
            {q: "Normalization?", a: "Reduce redundancy."},
            {q: "Denormalization?", a: "Add redundancy for speed."},
            {q: "1NF?", a: "Atomic values."},
            {q: "2NF?", a: "No partial dependency."},
            {q: "3NF?", a: "No transitive dependency."},
            {q: "Select?", a: "Read data."},
            {q: "Insert?", a: "Add data."},
            {q: "Update?", a: "Modify data."},
            {q: "Delete?", a: "Remove rows."},
            {q: "Truncate?", a: "Fast delete all."},
            {q: "Join?", a: "Combine tables."},
            {q: "Inner Join?", a: "Matching rows."},
            {q: "Left Join?", a: "All left, match right."},
            {q: "Right Join?", a: "All right, match left."},
            {q: "Full Join?", a: "All rows."},
            {q: "Group By?", a: "Group rows."},
            {q: "Having?", a: "Condition on group."},
            {q: "Order By?", a: "Sort."},
            {q: "Distinct?", a: "Unique values."},
            {q: "Aggregate functions?", a: "Sum, Count, Avg."},
            {q: "Subquery?", a: "Query inside query."},
            {q: "Correlated Subquery?", a: "Dependent on outer."},
            {q: "Constraint?", a: "Rule on column."},
            {q: "Auto Increment?", a: "Auto number."},
            {q: "Between?", a: "Range check."},
            {q: "Like?", a: "Pattern match."},
            {q: "In?", a: "List match."},
            {q: "Union?", a: "Combine results."},
            {q: "Stored Procedure?", a: "Saved script."},
            {q: "Trigger?", a: "Auto action."},
            {q: "ACID?", a: "Atomicity, Consistency, Isolation, Durability."},
            {q: "Transaction?", a: "Unit of work."},
            {q: "Schema?", a: "Structure."},
            {q: "Optimization?", a: "Indexing, avoiding SELECT *."},
            {q: "NoSQL?", a: "Non-relational."},
            {q: "Cursor?", a: "Row by row processing."},
            {q: "Alias?", a: "Temp name."}
        ],
        pharma: [
            {q: "Pharmacology?", a: "Study of drugs."},
            {q: "Pharmacokinetics?", a: "ADME (Absorption, Dist, Metab, Excretion)."},
            {q: "Pharmacodynamics?", a: "Drug action mechanism."},
            {q: "Bioavailability?", a: "Drug reaching circulation."},
            {q: "Half-life?", a: "Time to reduce 50%."},
            {q: "Prescription?", a: "Doctor's order."},
            {q: "OTC?", a: "Over The Counter."},
            {q: "Antibiotic resistance?", a: "Bacteria fighting drugs."},
            {q: "Analgesic?", a: "Pain killer."},
            {q: "Antipyretic?", a: "Fever reducer."},
            {q: "Antihistamine?", a: "Allergy relief."},
            {q: "Generic?", a: "Cheaper copy."},
            {q: "Dosage form?", a: "Tablet, Syrup, etc."},
            {q: "Contraindication?", a: "Do not use condition."},
            {q: "Adverse effect?", a: "Harmful side effect."},
            {q: "Drug interaction?", a: "Drugs affecting each other."},
            {q: "IV route?", a: "Intravenous."},
            {q: "IM route?", a: "Intramuscular."},
            {q: "SC route?", a: "Subcutaneous."},
            {q: "Dose?", a: "Quantity."},
            {q: "Schedule H?", a: "Prescription only."},
            {q: "Schedule X?", a: "Strict control drugs."},
            {q: "Vaccine?", a: "Immunity booster."},
            {q: "Insulin?", a: "Diabetes drug."},
            {q: "Antihypertensive?", a: "Lowers BP."},
            {q: "Anticoagulant?", a: "Blood thinner."},
            {q: "Antacid?", a: "Reduces acidity."},
            {q: "Sedation?", a: "Calming."},
            {q: "Topical?", a: "Skin application."},
            {q: "Capsule vs Tablet?", a: "Shell vs Compressed."},
            {q: "Toxicity?", a: "Poisonous level."},
            {q: "Teratogenic?", a: "Birth defect causing."},
            {q: "Placebo?", a: "Fake drug effect."},
            {q: "Compliance?", a: "Following orders."},
            {q: "Stability?", a: "Shelf life."},
            {q: "Expiry?", a: "End of safety."},
            {q: "Polio vaccine?", a: "OPV/IPV."},
            {q: "Antibiotic examples?", a: "Amox, Cipro."},
            {q: "NSAID?", a: "Ibuprofen, etc."},
            {q: "Corticosteroid?", a: "Inflammation reducer."},
            {q: "Antihyperglycemic?", a: "Lowers sugar."},
            {q: "Cytotoxic?", a: "Cancer killer."},
            {q: "Antimalarial?", a: "Chloroquine."},
            {q: "Antihyperlipidemic?", a: "Lowers cholesterol."},
            {q: "Misuse?", a: "Wrong usage."},
            {q: "Cold chain?", a: "Temp control."},
            {q: "Dispensing?", a: "Giving meds."},
            {q: "Counseling?", a: "Guiding patient."},
            {q: "ADR?", a: "Adverse Drug Reaction."},
            {q: "WHO?", a: "World Health Org."}
        ]
    };

    /* =========================================
       2. DATA: MOCK TEST (MCQ)
       ========================================= */
    const mcqDB = {
        hr: [
            { id: 1, q: "Best answer for 'Tell me about yourself'?", options: ["My life story", "Professional summary & skills", "My family background", "My hobbies only"], ans: 1 },
            { id: 2, q: "How to handle a conflict?", options: ["Ignore it", "Argue back", "Discuss professionally", "Complain to HR immediately"], ans: 2 },
            { id: 3, q: "What is a strength?", options: ["Being lazy", "Procrastination", "Problem solving", "Gossip"], ans: 2 },
            { id: 4, q: "What is a weakness?", options: ["I work too hard", "I have no weakness", "Public speaking (working on it)", "I hate people"], ans: 2 },
            { id: 5, q: "Why should we hire you?", options: ["I need money", "I am the best", "Skills match the role", "My house is near"], ans: 2 },
            { id: 6, q: "Where do you see yourself in 5 years?", options: ["CEO of this company", "Retired", "In a senior role adding value", "Same position"], ans: 2 },
            { id: 7, q: "How to handle pressure?", options: ["Panic", "Quit", "Prioritize and focus", "Cry"], ans: 2 },
            { id: 8, q: "Team member not working?", options: ["Do their work", "Shout at them", "Talk privately/Support", "Ignore"], ans: 2 },
            { id: 9, q: "Feedback handling?", options: ["Get angry", "Ignore", "Listen and improve", "Argue"], ans: 2 },
            { id: 10, q: "Ideal work environment?", options: ["No rules", "Collaborative & Growth", "Isolated", "Noisy"], ans: 1 },
            { id: 11, q: "Salary expectation?", options: ["1 Million", "Market Standard", "Anything", "Free"], ans: 1 },
            { id: 12, q: "Late for deadline?", options: ["Hide it", "Communicate early", "Blame others", "Quit"], ans: 1 },
            { id: 13, q: "Ethical dilemma?", options: ["Hide truth", "Honesty", "Benefit self", "Lie"], ans: 1 },
            { id: 14, q: "Overtime view?", options: ["Never", "Always", "When required", "Hate it"], ans: 2 },
            { id: 15, q: "Why leave last job?", options: ["Boss was bad", "Growth opportunity", "Got fired", "Bored"], ans: 1 }
        ],
        react: [
            { id: 1, q: "Primary purpose of React?", options: ["Routing", "UI Building", "Database", "Testing"], ans: 1 },
            { id: 2, q: "Which hook manages state?", options: ["useEffect", "useContext", "useState", "useReducer"], ans: 2 },
            { id: 3, q: "What is JSX?", options: ["DB Syntax", "JS Extension", "CSS Library", "Tool"], ans: 1 },
            { id: 4, q: "Data flows in React is?", options: ["Bi-directional", "Uni-directional", "Random", "None"], ans: 1 },
            { id: 5, q: "Method to render lists?", options: ["map()", "filter()", "reduce()", "each()"], ans: 0 },
            { id: 6, q: "useRef is used for?", options: ["Looping", "DOM Access", "Styling", "Routing"], ans: 1 },
            { id: 7, q: "Default port for React?", options: ["3000", "8080", "4200", "5000"], ans: 0 },
            { id: 8, q: "Prop drilling solution?", options: ["Redux/Context", "Props", "State", "Ref"], ans: 0 },
            { id: 9, q: "Lifecycle method replacement?", options: ["Class", "Hooks", "State", "None"], ans: 1 },
            { id: 10, q: "What is Virtual DOM?", options: ["Real DOM", "Copy of DOM", "HTML", "Browser"], ans: 1 },
            { id: 11, q: "Create React App command?", options: ["npm start", "npx create-react-app", "node react", "install react"], ans: 1 },
            { id: 12, q: "Parent to Child data?", options: ["State", "Props", "Ref", "Callback"], ans: 1 },
            { id: 13, q: "Child to Parent data?", options: ["Props", "Callback/Event", "Ref", "State"], ans: 1 },
            { id: 14, q: "Optimize performance?", options: ["useMemo", "useState", "useEffect", "useRef"], ans: 0 },
            { id: 15, q: "React is a?", options: ["Framework", "Library", "Language", "Database"], ans: 1 }
        ],
        node: [
            { id: 1, q: "Node.js engine is?", options: ["SpiderMonkey", "V8", "Chakra", "Nitro"], ans: 1 },
            { id: 2, q: "To read files use?", options: ["http", "path", "fs", "os"], ans: 2 },
            { id: 3, q: "Default local port?", options: ["3000", "8080", "80", "None"], ans: 3 },
            { id: 4, q: "Global object in Node?", options: ["window", "process", "document", "tab"], ans: 1 },
            { id: 5, q: "NPM stands for?", options: ["New Pkg Mgr", "Node Pkg Mgr", "Node Pgm Mgr", "None"], ans: 1 },
            { id: 6, q: "Event Loop handles?", options: ["Sync", "Async", "Files", "UI"], ans: 1 },
            { id: 7, q: "Express is?", options: ["Database", "Framework", "Library", "OS"], ans: 1 },
            { id: 8, q: "Rest API method to update?", options: ["GET", "POST", "PUT", "DELETE"], ans: 2 },
            { id: 9, q: "package.json contains?", options: ["Code", "Metadata", "Images", "CSS"], ans: 1 },
            { id: 10, q: "Async/Await is?", options: ["Sugar for Promises", "Sync code", "Thread", "Error"], ans: 0 },
            { id: 11, q: "Buffer class is for?", options: ["Text", "Binary Data", "Numbers", "Boolean"], ans: 1 },
            { id: 12, q: "Module export syntax?", options: ["export.modules", "module.exports", "js.export", "none"], ans: 1 },
            { id: 13, q: "__dirname gives?", options: ["File name", "Directory path", "User name", "Root"], ans: 1 },
            { id: 14, q: "Middleware function args?", options: ["req, res", "req, res, next", "req, next", "res, next"], ans: 1 },
            { id: 15, q: "Secure password lib?", options: ["fs", "crypto/bcrypt", "path", "http"], ans: 1 }
        ],
        sql: [
            { id: 1, q: "Command to fetch data?", options: ["GET", "SELECT", "PULL", "FETCH"], ans: 1 },
            { id: 2, q: "Unique identifier row?", options: ["Foreign Key", "Primary Key", "Index", "Unique"], ans: 1 },
            { id: 3, q: "Remove table structure?", options: ["DELETE", "DROP", "CLEAR", "REMOVE"], ans: 1 },
            { id: 4, q: "Add new row?", options: ["ADD", "INSERT", "UPDATE", "NEW"], ans: 1 },
            { id: 5, q: "Pattern matching?", options: ["LIKE", "MATCH", "SAME", "AS"], ans: 0 },
            { id: 6, q: "Sort results?", options: ["SORT BY", "ORDER BY", "ALIGN", "GROUP"], ans: 1 },
            { id: 7, q: "Count rows?", options: ["SUM", "TOTAL", "COUNT", "ADD"], ans: 2 },
            { id: 8, q: "No duplicates?", options: ["SINGLE", "DISTINCT", "ONLY", "UNIQUE"], ans: 1 },
            { id: 9, q: "Join common rows?", options: ["INNER", "LEFT", "RIGHT", "OUTER"], ans: 0 },
            { id: 10, q: "NULL means?", options: ["Zero", "Missing", "Space", "False"], ans: 1 },
            { id: 11, q: "Change data?", options: ["CHANGE", "MODIFY", "UPDATE", "ALTER"], ans: 2 },
            { id: 12, q: "Delete specific rows?", options: ["REMOVE", "DELETE", "DROP", "CUT"], ans: 1 },
            { id: 13, q: "Group aggregate?", options: ["GROUP BY", "ORDER BY", "COLLECT", "LIST"], ans: 0 },
            { id: 14, q: "Filter groups?", options: ["WHERE", "HAVING", "IF", "CHECK"], ans: 1 },
            { id: 15, q: "Transaction save?", options: ["SAVE", "COMMIT", "DONE", "KEEP"], ans: 1 }
        ],
        pharma: [
            { id: 1, q: "Study of drugs?", options: ["Biology", "Pharmacology", "Chemistry", "Pathology"], ans: 1 },
            { id: 2, q: "ADME stands for?", options: ["Absorb Dist Metab Excrete", "Add Divide Multiply", "Action Dose Meds", "None"], ans: 0 },
            { id: 3, q: "Fever reducer?", options: ["Analgesic", "Antipyretic", "Antibiotic", "Antiviral"], ans: 1 },
            { id: 4, q: "Pain killer?", options: ["Analgesic", "Antacid", "Statin", "Diuretic"], ans: 0 },
            { id: 5, q: "OTC means?", options: ["On The Counter", "Over The Counter", "Over The Cap", "On Time"], ans: 1 },
            { id: 6, q: "Generic drug is?", options: ["Expensive", "Branded", "Copy/Cheaper", "Fake"], ans: 2 },
            { id: 7, q: "Schedule H?", options: ["OTC", "Prescription", "Narcotic", "Food"], ans: 1 },
            { id: 8, q: "Insulin treats?", options: ["BP", "Diabetes", "Pain", "Fever"], ans: 1 },
            { id: 9, q: "Subcutaneous route?", options: ["Muscle", "Vein", "Under Skin", "Mouth"], ans: 2 },
            { id: 10, q: "Tablet vs Capsule?", options: ["Solid vs Shell", "Liquid vs Gas", "Same", "None"], ans: 0 },
            { id: 11, q: "Antibiotic example?", options: ["Paracetamol", "Amoxicillin", "Aspirin", "Insulin"], ans: 1 },
            { id: 12, q: "Adverse effect?", options: ["Benefit", "Harmful effect", "No effect", "Cure"], ans: 1 },
            { id: 13, q: "Half life?", options: ["50% decay time", "Full life", "Expiry", "Dose"], ans: 0 },
            { id: 14, q: "WHO?", options: ["World Health Org", "Why How", "Water", "None"], ans: 0 },
            { id: 15, q: "Placebo?", options: ["Strong drug", "Dummy drug", "Poison", "Food"], ans: 1 }
        ]
    };

    /* =========================================
       3. APP STATE & PERSISTENCE
       ========================================= */
    let currentQuestions = [];
    let userAnswers = {}; 
    let currentQIndex = 0;
    let timerInterval;
    let timeRemaining = 600; 
    let totalTestsTaken = 0;
    let userHistory = [];
    let reviewMode = false;

    // Load Data
    function loadUserData() {
        const data = localStorage.getItem('pathFinder_v2');
        if(data) {
            const parsed = JSON.parse(data);
            totalTestsTaken = parsed.totalTests || 0;
            userHistory = parsed.history || [];
            
            // Update UI
            document.getElementById('totalTestsDisp').innerText = totalTestsTaken;
            renderHistory();
        }
    }

    // Save Data
    function saveUserData() {
        const data = {
            totalTests: totalTestsTaken,
            history: userHistory
        };
        localStorage.setItem('pathFinder_v2', JSON.stringify(data));
    }

    /* =========================================
       4. NAVIGATION & VIEWS
       ========================================= */
    function showView(id, btn) {
        document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        
        // Active Nav State
        if(btn) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        // Refresh History if viewing history
        if(id === 'result-history') renderHistory();
    }

    function renderStudyList(cat, btn) {
        const container = document.getElementById('studyListContainer');
        container.innerHTML = "";
        
        if(btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        studyDB[cat].forEach((item) => {
            container.innerHTML += `
                <div class="q-card" onclick="this.classList.toggle('open')">
                    <div class="q-card-q">${item.q}</div>
                    <div class="answer-text"><strong>Answer:</strong> ${item.a}</div>
                </div>
            `;
        });
    }

    /* =========================================
       5. EXAM LOGIC
       ========================================= */
    function startExam(subject) {
        const fullList = mcqDB[subject];
        // Random 10
        currentQuestions = fullList.sort(() => 0.5 - Math.random()).slice(0, 10);
        
        userAnswers = {};
        currentQIndex = 0;
        timeRemaining = 600; 
        reviewMode = false;
        
        // UI Setup
        document.getElementById('subjectTitle').innerText = subject.toUpperCase() + " EXAM";
        document.getElementById('totalQNum').innerText = currentQuestions.length;
        document.getElementById('btnFinishReview').style.display = 'none';
        document.getElementById('btnSubmit').style.display = 'none';
        document.getElementById('btnNext').style.display = 'block';
        
        renderPalette();
        loadQuestion(0);
        startTimer();
        
        document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
        document.getElementById('view-exam').classList.add('active');
    }

    function loadQuestion(index) {
        currentQIndex = index;
        const q = currentQuestions[index];
        
        document.getElementById('currentQNum').innerText = index + 1;
        document.getElementById('qText').innerText = q.q;

        const optionsBox = document.getElementById('optionsBox');
        optionsBox.innerHTML = '';
        
        q.options.forEach((opt, i) => {
            let className = "option-card";
            
            if(reviewMode) {
                // Review Logic
                if(i === q.ans) className += " correct";
                else if(userAnswers[index] === i) className += " wrong";
            } else {
                // Exam Logic
                if(userAnswers[index] === i) className += " selected";
            }

            optionsBox.innerHTML += `
                <div class="${className}" onclick="${!reviewMode ? `selectOption(${i})` : ''}">
                    <div class="option-circle"></div>
                    <span>${opt}</span>
                </div>
            `;
        });

        // Navigation visibility
        document.getElementById('btnPrev').style.visibility = index === 0 ? 'hidden' : 'visible';
        
        if(!reviewMode) {
            document.getElementById('btnNext').style.display = index === currentQuestions.length - 1 ? 'none' : 'block';
            document.getElementById('btnSubmit').style.display = index === currentQuestions.length - 1 ? 'block' : 'none';
        } else {
            document.getElementById('btnNext').style.display = index === currentQuestions.length - 1 ? 'none' : 'block';
            document.getElementById('btnSubmit').style.display = 'none';
        }

        updatePalette();
    }

    function selectOption(optionIndex) {
        if(reviewMode) return;
        userAnswers[currentQIndex] = optionIndex;
        loadQuestion(currentQIndex);
    }

    function nextQuestion() {
        if(currentQIndex < currentQuestions.length - 1) loadQuestion(currentQIndex + 1);
    }
    
    function prevQuestion() {
        if(currentQIndex > 0) loadQuestion(currentQIndex - 1);
    }

    function renderPalette() {
        const box = document.getElementById('paletteBox');
        box.innerHTML = '';
        currentQuestions.forEach((_, i) => {
            box.innerHTML += `<div class="q-num" id="p-btn-${i}" onclick="loadQuestion(${i})">${i+1}</div>`;
        });
    }

    function updatePalette() {
        currentQuestions.forEach((_, i) => {
            const btn = document.getElementById(`p-btn-${i}`);
            btn.className = 'q-num';
            if (i === currentQIndex) btn.classList.add('active');
            if (userAnswers[i] !== undefined) btn.classList.add('answered');
        });
    }

    function startTimer() {
        clearInterval(timerInterval);
        const display = document.getElementById('timerDisplay');
        timerInterval = setInterval(() => {
            timeRemaining--;
            let m = Math.floor(timeRemaining / 60);
            let s = timeRemaining % 60;
            display.innerText = `${m}:${s < 10 ? '0'+s : s}`;
            if(timeRemaining <= 0) {
                clearInterval(timerInterval);
                submitExam();
            }
        }, 1000);
    }

    function submitExam() {
        clearInterval(timerInterval);
        let correct = 0;
        let wrong = 0;
        
        currentQuestions.forEach((q, i) => {
            if(userAnswers[i] === q.ans) correct++;
            else wrong++;
        });

        const score = Math.round((correct / currentQuestions.length) * 100);
        
        // Update Result View
        document.getElementById('scoreValue').innerText = score;
        document.getElementById('resCorrect').innerText = correct;
        document.getElementById('resWrong').innerText = wrong;
        
        // Save Global Stats
        totalTestsTaken++;
        
        // Add to History
        const resultRecord = {
            topic: document.getElementById('subjectTitle').innerText.replace(" EXAM", ""),
            score: score,
            correct: correct,
            total: currentQuestions.length,
            date: new Date().toLocaleDateString() + " " + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
        };
        userHistory.unshift(resultRecord);
        saveUserData();

        document.getElementById('totalTestsDisp').innerText = totalTestsTaken;

        document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
        document.getElementById('view-result').classList.add('active');
    }

    /* =========================================
       6. REVIEW & HISTORY LOGIC
       ========================================= */
    function startReviewMode() {
        reviewMode = true;
        document.getElementById('view-result').classList.remove('active');
        document.getElementById('view-exam').classList.add('active');
        
        document.getElementById('btnSubmit').style.display = 'none';
        document.getElementById('btnFinishReview').style.display = 'block';
        
        loadQuestion(0);
    }

    function renderHistory() {
        const list = document.getElementById('historyList');
        if(userHistory.length === 0) {
            list.innerHTML = `<p style="color:#9ca3af; text-align:center; margin-top:50px;">No tests taken yet.</p>`;
            return;
        }

        let html = `
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Topic</th>
                        <th>Score</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
        `;

        userHistory.forEach(item => {
            let badgeClass = item.score >= 70 ? 'badge-good' : (item.score >= 40 ? 'badge-avg' : 'badge-bad');
            let status = item.score >= 70 ? 'Passed' : 'Failed';
            
            html += `
                <tr>
                    <td style="color:#6b7280; font-size:0.9rem;">${item.date}</td>
                    <td style="font-weight:600;">${item.topic}</td>
                    <td style="font-weight:700;">${item.score}%</td>
                    <td><span class="badge ${badgeClass}">${status}</span></td>
                </tr>
            `;
        });

        html += `</tbody></table>`;
        list.innerHTML = html;
    }

    function clearHistory() {
        if(confirm("Are you sure you want to clear your history?")) {
            userHistory = [];
            totalTestsTaken = 0;
            saveUserData();
            document.getElementById('totalTestsDisp').innerText = 0;
            renderHistory();
        }
    }

    // Init
    window.onload = function() {
        renderStudyList('hr'); 
        loadUserData();
    };

</script>
</body>
</html>